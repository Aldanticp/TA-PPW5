<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Pink Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    *{
      box-sizing:border-box;
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    body{
      background:linear-gradient(135deg,#ffe4f0,#fff7fb);
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
    }

    .calculator{
      width:340px;
      background:#1f1f1f;
      border-radius:18px;
      padding:16px;
      box-shadow:0 20px 50px rgba(0, 0, 0, 0.35);
    }

    .screen{
      background:linear-gradient(180deg,#150f12ee,#000);
      color:#d49fb6;
      font-size:36px;
      text-align:right;
      padding:20px 14px;
      border-radius:12px;
      margin-bottom:12px;
      box-shadow: inset 0 0 10px rgba(72, 52, 62, 0.2);
      overflow-x:auto;
    }

    .keys{
      display:grid;
      grid-template-columns: repeat(4,1fr);
      gap:10px;
    }

    button{
      height:56px;
      border:none;
      border-radius:8px;
      font-size:18px;
      cursor:pointer;
      background:#3a3a3a;
      color:#fff;
      box-shadow: inset 0 -2px rgba(255,255,255,0.05);
    }

    button:active{
      transform:scale(0.96);
    }

    .op{
      background:linear-gradient(180deg,#98325f,#98325f);
      color:white;
      font-weight:bold;
    }

    .equals{
      grid-column: span 2;
      background:linear-gradient(180deg,#f3b9d5,#cc8ca8 );
      font-weight:bold;
    }

    .zero{
      grid-column: span 2;
    }

    .memory{
      background:#2b2b2b;
      font-size:14px;
      color:#fdf4f8;
    }

    .history{
      margin-top:14px;
      background:#2b2b2b;
      padding:10px;
      border-radius:10px;
      max-height:120px;
      overflow:auto;
      color:#ffcce0;
      font-size:13px;
    }

    .history div{
      margin-bottom:4px;
      padding:6px;
      background:#1f1f1f;
      border-radius:6px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .clear-history{
      margin-top:10px;
      width:100%;
      padding:10px;
      border:none;
      border-radius:10px;
      background:#98325f;
      color:white;
      font-weight:bold;
      cursor:pointer;
    }

    .delete-btn{
      background:none;
      border:none;
      color:#ff8fb8;
      cursor:pointer;
      font-size:14px;
    }
  </style>
</head>
<body>

<div class="calculator">
  <div class="screen" id="display">0</div>

  <div class="keys">
    <button class="memory" onclick="memClear()">MC</button>
    <button class="memory" onclick="memRecall()">MR</button>
    <button class="memory" onclick="memAdd()">M+</button>
    <button class="memory" onclick="memSub()">M-</button>

    <button onclick="clearAll()">C</button>
    <button onclick="clearEntry()">CE</button>
    <button class="op" onclick="inputOperator('/')">÷</button>
    <button class="op" onclick="inputOperator('*')">×</button>

    <button onclick="inputNumber('7')">7</button>
    <button onclick="inputNumber('8')">8</button>
    <button onclick="inputNumber('9')">9</button>
    <button class="op" onclick="inputOperator('-')">−</button>

    <button onclick="inputNumber('4')">4</button>
    <button onclick="inputNumber('5')">5</button>
    <button onclick="inputNumber('6')">6</button>
    <button class="op" onclick="inputOperator('+')">+</button>

    <button onclick="inputNumber('1')">1</button>
    <button onclick="inputNumber('2')">2</button>
    <button onclick="inputNumber('3')">3</button>

    <!-- BUTTON = SUDAH ADA -->
    <button class="equals" onclick="calculate()">=</button>

    <button class="zero" onclick="inputNumber('0')">0</button>
    <button onclick="inputDecimal()">.</button>
  </div>

  <div class="history" id="history"></div>

  <button class="clear-history" onclick="clearHistory()">
    Clear History
  </button>
</div>

<script>
  let display = document.getElementById("display");
  let historyDiv = document.getElementById("history");

  let current = "0";
  let operator = null;
  let previous = null;
  let memory = 0;
  let history = [];

  function updateDisplay(){
    display.textContent = current;
  }

  function inputNumber(num){
    if(current === "0") current = num;
    else current += num;
    updateDisplay();
  }

  function inputDecimal(){
    if(!current.includes(".")){
      current += ".";
      updateDisplay();
    }
  }

  function inputOperator(op){
    if(operator && previous !== null){
      calculate();
    }
    previous = current;
    operator = op;
    current = "0";
  }

  function calculate(){
    if(operator === null || previous === null) return;

    let a = parseFloat(previous);
    let b = parseFloat(current);
    let result;

    if(operator === "/" && b === 0){
      current = "Error";
      operator = null;
      previous = null;
      updateDisplay();
      return;
    }

    switch(operator){
      case "+": result = a + b; break;
      case "-": result = a - b; break;
      case "*": result = a * b; break;
      case "/": result = a / b; break;
    }

    addHistory(`${a} ${operator} ${b} = ${result}`);

    current = result.toString();
    operator = null;
    previous = null;
    updateDisplay();
  }

  function clearAll(){
    current = "0";
    operator = null;
    previous = null;
    updateDisplay();
  }

  function clearEntry(){
    current = "0";
    updateDisplay();
  }

  /* ===== HISTORY SYSTEM ===== */

  function addHistory(text){
    history.unshift(text);
    history = history.slice(0,5);
    renderHistory();
  }

  function renderHistory(){
    historyDiv.innerHTML = "";
    history.forEach((item, index) => {
      historyDiv.innerHTML += `
        <div>
          <span>${item}</span>
          <button class="delete-btn" onclick="deleteHistory(${index})">✕</button>
        </div>
      `;
    });
  }

  function deleteHistory(index){
    history.splice(index, 1);
    renderHistory();
  }

  function clearHistory(){
    history = [];
    renderHistory();
  }

  /* ===== MEMORY ===== */

  function memAdd(){
    memory += parseFloat(current) || 0;
  }

  function memSub(){
    memory -= parseFloat(current) || 0;
  }

  function memRecall(){
    current = memory.toString();
    updateDisplay();
  }

  function memClear(){
    memory = 0;
  }

  /* ===== KEYBOARD ===== */

  document.addEventListener("keydown", function(e){
    if(!isNaN(e.key)) inputNumber(e.key);
    if(e.key === "+") inputOperator("+");
    if(e.key === "-") inputOperator("-");
    if(e.key === "*") inputOperator("*");
    if(e.key === "/") inputOperator("/");
    if(e.key === "Enter") calculate();
    if(e.key === ".") inputDecimal();
    if(e.key === "Escape") clearAll();
    if(e.key === "Backspace") clearEntry();
  });

  updateDisplay();
</script>

</body>
</html>
